EESchema Schematic File Version 4
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 5
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L OS-LD:MAX9643 U?
U 1 1 5CDC6E2E
P 4450 6500
F 0 "U?" H 4450 6177 50  0000 C CNN
F 1 "MAX9643" H 4450 6086 50  0000 C CNN
F 2 "" H 4450 6200 50  0001 C CNN
F 3 "" H 4450 6200 50  0001 C CNN
	1    4450 6500
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5CDC76E9
P 3550 6600
F 0 "C?" H 3665 6646 50  0000 L CNN
F 1 "1uF" H 3665 6555 50  0000 L CNN
F 2 "" H 3588 6450 50  0001 C CNN
F 3 "~" H 3550 6600 50  0001 C CNN
	1    3550 6600
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 6550 3800 6550
Wire Wire Line
	3800 6550 3800 6450
Wire Wire Line
	3800 6450 3550 6450
Wire Wire Line
	4050 6650 4050 6750
Wire Wire Line
	4050 6750 3550 6750
Wire Wire Line
	4050 6350 4050 6100
$Comp
L power:+5V #PWR?
U 1 1 5CDE0555
P 5250 5950
F 0 "#PWR?" H 5250 5800 50  0001 C CNN
F 1 "+5V" H 5265 6123 50  0000 C CNN
F 2 "" H 5250 5950 50  0001 C CNN
F 3 "" H 5250 5950 50  0001 C CNN
	1    5250 5950
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5CDEE828
P 5500 3700
F 0 "C?" V 5248 3700 50  0000 C CNN
F 1 "100nF" V 5339 3700 50  0000 C CNN
F 2 "" H 5538 3550 50  0001 C CNN
F 3 "~" H 5500 3700 50  0001 C CNN
	1    5500 3700
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5CDFB610
P 4600 4050
F 0 "R?" V 4393 4050 50  0000 C CNN
F 1 "1k" V 4484 4050 50  0000 C CNN
F 2 "" V 4530 4050 50  0001 C CNN
F 3 "~" H 4600 4050 50  0001 C CNN
	1    4600 4050
	0    1    1    0   
$EndComp
$Comp
L Device:R R?
U 1 1 5CDFBA7F
P 5050 4050
F 0 "R?" V 4843 4050 50  0000 C CNN
F 1 "1k" V 4934 4050 50  0000 C CNN
F 2 "" V 4980 4050 50  0001 C CNN
F 3 "~" H 5050 4050 50  0001 C CNN
	1    5050 4050
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 5CDFBC7C
P 4850 4200
F 0 "C?" H 4965 4246 50  0000 L CNN
F 1 "10pF" H 4965 4155 50  0000 L CNN
F 2 "" H 4888 4050 50  0001 C CNN
F 3 "~" H 4850 4200 50  0001 C CNN
	1    4850 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4750 4050 4850 4050
Wire Wire Line
	4850 4050 4900 4050
$Comp
L power:GND #PWR?
U 1 1 5CE00065
P 4850 4400
F 0 "#PWR?" H 4850 4150 50  0001 C CNN
F 1 "GND" H 4855 4227 50  0000 C CNN
F 2 "" H 4850 4400 50  0001 C CNN
F 3 "" H 4850 4400 50  0001 C CNN
	1    4850 4400
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 4350 4850 4400
$Comp
L Device:R R?
U 1 1 5CE06C26
P 4700 5550
F 0 "R?" H 4630 5504 50  0000 R CNN
F 1 "1k" H 4630 5595 50  0000 R CNN
F 2 "" V 4630 5550 50  0001 C CNN
F 3 "~" H 4700 5550 50  0001 C CNN
	1    4700 5550
	0    1    1    0   
$EndComp
NoConn ~ 4450 6150
Wire Wire Line
	4500 3000 4500 2800
$Comp
L Device:R R?
U 1 1 5CDE8E37
P 3950 3250
F 0 "R?" H 4020 3296 50  0000 L CNN
F 1 "1k" H 4020 3205 50  0000 L CNN
F 2 "" V 3880 3250 50  0001 C CNN
F 3 "~" H 3950 3250 50  0001 C CNN
	1    3950 3250
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 5CDE7B2D
P 3950 2950
F 0 "R?" H 4020 2996 50  0000 L CNN
F 1 "12k" H 4020 2905 50  0000 L CNN
F 2 "" V 3880 2950 50  0001 C CNN
F 3 "~" H 3950 2950 50  0001 C CNN
	1    3950 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3950 6450 4050 6450
$Comp
L Device:C C?
U 1 1 5CDC7B44
P 3150 7000
F 0 "C?" H 3265 7046 50  0000 L CNN
F 1 "100nF" H 3265 6955 50  0000 L CNN
F 2 "" H 3188 6850 50  0001 C CNN
F 3 "~" H 3150 7000 50  0001 C CNN
	1    3150 7000
	-1   0    0    1   
$EndComp
$Comp
L Device:C C?
U 1 1 5CDC7F91
P 3600 7000
F 0 "C?" H 3715 7046 50  0000 L CNN
F 1 "1uF" H 3715 6955 50  0000 L CNN
F 2 "" H 3638 6850 50  0001 C CNN
F 3 "~" H 3600 7000 50  0001 C CNN
	1    3600 7000
	-1   0    0    1   
$EndComp
Wire Wire Line
	3950 6350 3950 6450
$Comp
L power:GND #PWR?
U 1 1 5CDC96ED
P 6450 7350
F 0 "#PWR?" H 6450 7100 50  0001 C CNN
F 1 "GND" H 6455 7177 50  0000 C CNN
F 2 "" H 6450 7350 50  0001 C CNN
F 3 "" H 6450 7350 50  0001 C CNN
	1    6450 7350
	1    0    0    -1  
$EndComp
$Comp
L OS-LD:PSMN0R7-25YLD Q?
U 1 1 5CE09D45
P 6350 5950
F 0 "Q?" H 6556 5996 50  0000 L CNN
F 1 "PSMN0R7-25YLD" H 6556 5905 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:LFPAK56" H 6500 5950 50  0001 C CNN
F 3 "https://assets.nexperia.com/documents/data-sheet/PSMN0R7-25YLD.pdf" H 6350 5950 50  0001 C CNN
	1    6350 5950
	1    0    0    -1  
$EndComp
$Comp
L OS-LD:TVL3541 U?
U 1 1 5D151151
P 4800 3100
F 0 "U?" H 4800 3425 50  0000 C CNN
F 1 "TLV3541" H 4800 3334 50  0000 C CNN
F 2 "" H 4800 3100 50  0001 C CNN
F 3 "" H 4800 3100 50  0001 C CNN
	1    4800 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	4500 3100 4200 3100
Wire Wire Line
	4200 3100 4200 3400
Wire Wire Line
	5100 3200 5100 3300
Wire Wire Line
	5100 3300 4100 3300
Wire Wire Line
	5100 3000 5500 3000
Wire Wire Line
	3950 3400 4200 3400
Connection ~ 4200 3400
Wire Wire Line
	4100 3100 4100 3300
Text Notes 5850 550  0    50   ~ 0
Alternative for TLV3541: THS4271
$Sheet
S 750  1450 1000 2150
U 5D037190
F0 "STM32 Schematic" 50
F1 "STM32.sch" 50
F2 "DAC-D0" I R 1750 1550 50 
F3 "DAC-D1" I R 1750 1650 50 
F4 "DAC-D2" I R 1750 1750 50 
F5 "DAC-D4" I R 1750 1950 50 
F6 "DAC-D5" I R 1750 2050 50 
F7 "DAC-D6" I R 1750 2150 50 
F8 "DAC-D7" I R 1750 2250 50 
F9 "DAC-D8" I R 1750 2350 50 
F10 "DAC-D9" I R 1750 2450 50 
F11 "DAC-D10" I R 1750 2550 50 
F12 "DAC-D11" I R 1750 2650 50 
F13 "DAC-D12" I R 1750 2750 50 
F14 "DAC-D13" I R 1750 2850 50 
F15 "DAC-D3" I R 1750 1850 50 
F16 "DAC-CLOCK" I R 1750 3000 50 
F17 "ADC-SHUNT" I R 1750 3150 50 
F18 "OCSense" I R 1750 3250 50 
F19 "OCControl" I R 1750 3350 50 
$EndSheet
$Sheet
S 2250 1450 1050 2150
U 5D0C0D63
F0 "Output Stage" 50
F1 "Output.sch" 50
F2 "DAC-D1" I L 2250 1650 50 
F3 "DAC-D2" I L 2250 1750 50 
F4 "DAC-D8" I L 2250 2350 50 
F5 "DAC-D9" I L 2250 2450 50 
F6 "DAC-D10" I L 2250 2550 50 
F7 "DAC-D11" I L 2250 2650 50 
F8 "DAC-D12" I L 2250 2750 50 
F9 "DAC-D13" I L 2250 2850 50 
F10 "DAC-D3" I L 2250 1850 50 
F11 "DAC-CLOCK" I L 2250 3000 50 
F12 "DAC-D4" I L 2250 1950 50 
F13 "DAC-D5" I L 2250 2050 50 
F14 "DAC-D6" I L 2250 2150 50 
F15 "DAC-D7" I L 2250 2250 50 
F16 "DAC-D0" I L 2250 1550 50 
F17 "MOSFET-OUT" I R 3300 1550 50 
$EndSheet
Wire Wire Line
	1750 1550 2250 1550
Wire Wire Line
	2250 1650 1750 1650
Wire Wire Line
	1750 1750 2250 1750
Wire Wire Line
	2250 1850 1750 1850
Wire Wire Line
	1750 1950 2250 1950
Wire Wire Line
	2250 2050 1750 2050
Wire Wire Line
	1750 2150 2250 2150
Wire Wire Line
	2250 2250 1750 2250
Wire Wire Line
	1750 2350 2250 2350
Wire Wire Line
	2250 2450 1750 2450
Wire Wire Line
	1750 2550 2250 2550
Wire Wire Line
	2250 2650 1750 2650
Wire Wire Line
	1750 2750 2250 2750
Wire Wire Line
	2250 2850 1750 2850
Wire Wire Line
	1750 3000 2250 3000
$Sheet
S 8550 3350 1050 650 
U 5D12441E
F0 "Power" 50
F1 "Power.sch" 50
F2 "+12V" I L 8550 3450 50 
F3 "GND" I R 9600 3450 50 
F4 "+5V" I L 8550 3750 50 
F5 "+3.3V" I L 8550 3900 50 
F6 "+9V" I L 8550 3600 50 
$EndSheet
Text Notes 4100 7050 0    50   ~ 0
Internal Gain: 2.5
Text Notes 4500 3500 0    50   ~ 0
Second stage amplifier:\nGain 13
$Comp
L OS-LD:IRFP4568PbF Q?
U 1 1 5D20B94F
P 6350 1550
F 0 "Q?" H 6556 1596 50  0000 L CNN
F 1 "IRFP4568PbF" H 6556 1505 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-247-3_Vertical" H 6500 1550 50  0001 C CNN
F 3 "" H 6350 1550 50  0001 C CNN
	1    6350 1550
	1    0    0    -1  
$EndComp
$Sheet
S 3300 4850 1200 950 
U 5D20CDF9
F0 "Overcurrent Protection" 50
F1 "Overcurrent.sch" 50
F2 "OCSense" I R 4500 5550 50 
F3 "OCMosfet" I R 4500 5650 50 
F4 "OCControl" I L 3300 5650 50 
F5 "OCStatus" I L 3300 5550 50 
$EndSheet
$Comp
L Device:R_Shunt R?
U 1 1 5D24ABAC
P 6450 6650
F 0 "R?" H 6363 6604 50  0000 R CNN
F 1 "R_Shunt" H 6363 6695 50  0000 R CNN
F 2 "" V 6380 6650 50  0001 C CNN
F 3 "~" H 6450 6650 50  0001 C CNN
	1    6450 6650
	-1   0    0    1   
$EndComp
Wire Wire Line
	6450 5750 6450 1750
Wire Wire Line
	6450 6150 6450 6450
Wire Wire Line
	4850 6550 5950 6550
Wire Wire Line
	5950 6550 5950 6750
Wire Wire Line
	5950 6750 6300 6750
Wire Wire Line
	6300 6550 6250 6550
Wire Wire Line
	6250 6550 6250 6650
Wire Wire Line
	6250 6650 4850 6650
Wire Wire Line
	6450 6850 6450 7350
Wire Wire Line
	6150 5950 5850 5950
Wire Wire Line
	5850 5950 5850 5650
Wire Wire Line
	5850 5650 4500 5650
Wire Wire Line
	4850 6450 5250 6450
Wire Wire Line
	4850 6350 4950 6350
Wire Wire Line
	4950 6350 4950 5550
Wire Wire Line
	4500 5550 4550 5550
Wire Wire Line
	4850 5550 4950 5550
$Comp
L Device:C C?
U 1 1 5CDC899C
P 5250 7000
F 0 "C?" H 5365 7046 50  0000 L CNN
F 1 "100nF" H 5365 6955 50  0000 L CNN
F 2 "" H 5288 6850 50  0001 C CNN
F 3 "~" H 5250 7000 50  0001 C CNN
	1    5250 7000
	-1   0    0    1   
$EndComp
Wire Wire Line
	5250 5950 5250 6450
Wire Wire Line
	5250 6450 5250 6850
Connection ~ 5250 6450
Wire Wire Line
	5250 7150 5250 7350
Connection ~ 5250 7350
Wire Wire Line
	5250 7350 6450 7350
Wire Wire Line
	3150 7350 3150 7150
Wire Wire Line
	3150 7350 3600 7350
Wire Wire Line
	3600 7150 3600 7350
Connection ~ 3600 7350
Wire Wire Line
	3150 6850 3600 6850
Wire Wire Line
	3150 6850 3150 6350
Wire Wire Line
	3150 6350 3950 6350
Connection ~ 3150 6850
Connection ~ 6450 7350
Wire Wire Line
	3600 7350 5250 7350
Wire Wire Line
	2500 6100 2500 7350
Wire Wire Line
	2500 6100 4050 6100
Connection ~ 3150 7350
Connection ~ 3950 2800
Wire Wire Line
	3950 2800 4500 2800
Connection ~ 3950 3100
Wire Wire Line
	3950 3100 4100 3100
Wire Wire Line
	4500 3200 4350 3200
Wire Wire Line
	4350 3200 4350 4050
Wire Wire Line
	5300 4050 5200 4050
Wire Wire Line
	5300 4050 5300 5550
Wire Wire Line
	4350 4050 4450 4050
Wire Wire Line
	4200 4400 4850 4400
Wire Wire Line
	4200 3400 4200 4400
Connection ~ 4850 4400
Wire Wire Line
	4850 4400 5500 4400
Wire Wire Line
	5500 4400 5500 3850
Wire Wire Line
	5500 3550 5500 3000
Wire Wire Line
	4950 5550 5300 5550
Connection ~ 4950 5550
Wire Wire Line
	3550 2800 3550 3750
Wire Wire Line
	3550 3750 2150 3750
Wire Wire Line
	2150 3750 2150 3150
Wire Wire Line
	2150 3150 1750 3150
Wire Wire Line
	3550 2800 3950 2800
Wire Wire Line
	3300 1550 6150 1550
Wire Wire Line
	1750 3250 2050 3250
Wire Wire Line
	2050 3250 2050 5550
Wire Wire Line
	2050 5550 3300 5550
Wire Wire Line
	3300 5650 1950 5650
Wire Wire Line
	1950 5650 1950 3350
Wire Wire Line
	1950 3350 1750 3350
Connection ~ 5500 3000
Wire Wire Line
	5500 3000 5500 2900
$Comp
L power:+5V #PWR?
U 1 1 5CDED736
P 5500 2900
F 0 "#PWR?" H 5500 2750 50  0001 C CNN
F 1 "+5V" H 5515 3073 50  0000 C CNN
F 2 "" H 5500 2900 50  0001 C CNN
F 3 "" H 5500 2900 50  0001 C CNN
	1    5500 2900
	1    0    0    -1  
$EndComp
Text GLabel 5650 3000 2    50   Input ~ 0
+5V
Wire Wire Line
	5650 3000 5500 3000
Text GLabel 2250 7350 0    50   Input ~ 0
GND
Wire Wire Line
	2250 7350 2500 7350
Connection ~ 2500 7350
Wire Wire Line
	2500 7350 3150 7350
Connection ~ 4850 4050
$EndSCHEMATC
